% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/split_original_header.R
\name{split_original_header}
\alias{split_original_header}
\title{split_original_header}
\usage{
split_original_header(dat, columns, split_points, original_header)
}
\arguments{
\item{dat}{dataframe}

\item{columns}{vector of strings giving (in order) New column names for 
group_col, nested_column_1, and nested_column_2 (nested_column_2 is optional).}

\item{split_points}{vector of strings giving (in order) the regex for 
where to split the original header to give group_col, nested_col_1 and 
(optionally) nested_column_2. The first col_split_point separates
group_col from nested_col_2. The second splits nested_col_2 from nested_col_1}

\item{original_header.}{string. Column name containing the info we want to 
put in the new columns}
}
\value{
tibble. Tidy dataframe.
}
\description{
Split sub-service and transaction information into their own columns
}
\details{
Split sub-service and transaction information into their own columns

Some headers contain both grouping variable and nested variable names. In 
these cases we want to split the information into separate columns.
split_points are used to determine where each split should occur. 
The order these are given is important: the first col_split_point separates
group_col from nested_col_2. If that pattern does not exist, it is assumed that
nested_col_2 should be a copy of group_col. The second col_split_point separates
nested_col_2 from nested_col_1.

This is e.g. the case for for sub-service (grouping var) and transaction 
(nested under sub-service) dluhc revenue expenditure final data from
2021-22.
}
\examples{
dat <- data.frame(
  "original_header" = c("Education:\n secondary_education\r\n � thousand",
                        "Education\n � thousand")
)
columns <- c("service", "units", "subservice")
split_points <- c( "\\\\:\\\\s*(\r\n|\r|\n)", "(\r\n|\r|\n)\\\\s*\\\\�")
result <- split_original_header(dat, columns, split_points, "original_header")

}
\author{
Emma Wood \email{emma.wood@ons.gov.uk}

Mark London \email{mark.london@ext.ons.gov.uk}
}
